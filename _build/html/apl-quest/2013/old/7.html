
<!DOCTYPE html>


<html lang="en" data-content_root="../../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Float your Boat &#8212; APL Quest Notes</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../../../_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="../../../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../../../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
    <link rel="stylesheet" type="text/css" href="../../../_static/custom.css?v=2f532779" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="../../../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="../../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../../_static/design-tabs.js?v=36754332"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../../../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'apl-quest/2013/old/7';</script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="../../../intro.html">
  
  
  
  
  
  
    <p class="title logo__title">APL Quest Notes</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../../intro.html">
                    Welcome to your Jupyter Book
                </a>
            </li>
        </ul>
        
    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../../_sources/apl-quest/2013/old/7.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>

</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Float your Boat</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="float-your-boat">
<h1><a class="reference external" href="https://problems.tryapl.org/psets/2013.html?goto=P7_Float_Your_Boat">Float your Boat</a><a class="headerlink" href="#float-your-boat" title="Link to this heading">#</a></h1>
<p><strong>Problem:</strong> Write a dfn which selects the floating point (non-integer) numbers from a numeric vector.</p>
<p><strong>Video:</strong> <a class="reference external" href="https://youtu.be/w5LvImFVi2M">https://youtu.be/w5LvImFVi2M</a>
<strong>Code:</strong> <a class="github reference external" href="https://github.com/abrudz/apl_quest/blob/main/2013/7.apl">abrudz/apl_quest</a></p>
<p><strong>Example Solutions:</strong></p>
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">v</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">¯3.1</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">1.5</span><span class="w"> </span><span class="m">92.6</span><span class="w"> </span><span class="m">¯5</span><span class="w"> </span><span class="c1">⍝ Test Data</span>
<span class="nv">A</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="kt">{</span><span class="bp">⍵</span><span class="na">/⍨</span><span class="bp">⍵</span><span class="o">≠⌊</span><span class="bp">⍵</span><span class="kt">}</span><span class="w"> </span><span class="c1">⍝ Compare the number against it&#39;s rounded version. Same is int. Different is Float.  </span>
<span class="nv">B</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="p">(</span><span class="na">/⍨</span><span class="p">)</span><span class="na">∘</span><span class="p">(</span><span class="o">≠</span><span class="na">∘</span><span class="o">⌊</span><span class="na">⍨</span><span class="p">)</span><span class="na">⍨</span><span class="w"> </span><span class="c1">⍝ {(⍵≠(⌊⍵))/⍵}</span>
<span class="w">	</span><span class="err">```</span>

<span class="nv">A</span>
<span class="m">1</span><span class="na">.</span><span class="w"> </span><span class="err">`</span><span class="bp">⍵</span><span class="o">≠⌊</span><span class="bp">⍵</span><span class="err">`</span><span class="w"> </span><span class="sr">[</span><span class="nv">Floor</span><span class="sr">]</span><span class="p">(</span><span class="nv">https</span><span class="bp">:</span><span class="na">//</span><span class="nv">aplwiki</span><span class="na">.</span><span class="nv">com</span><span class="na">/</span><span class="nv">wiki</span><span class="na">/</span><span class="nv">Floor</span><span class="p">)</span><span class="w"> </span><span class="err">`</span><span class="o">⌊</span><span class="err">`</span><span class="w"> </span><span class="nv">Rounds</span><span class="w"> </span><span class="nv">down</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">nearest</span><span class="w"> </span><span class="nv">real</span><span class="w"> </span><span class="nv">number</span><span class="na">.</span>
<span class="m">2</span><span class="na">.</span><span class="w"> </span><span class="sr">[</span><span class="nv">Not</span><span class="w"> </span><span class="nv">Equal</span><span class="w"> </span><span class="nv">to</span><span class="sr">]</span><span class="p">(</span><span class="nv">https</span><span class="bp">:</span><span class="na">//</span><span class="nv">aplwiki</span><span class="na">.</span><span class="nv">com</span><span class="na">/</span><span class="nv">wiki</span><span class="na">/</span><span class="nv">Not_Equal_to</span><span class="p">)</span><span class="w"> </span><span class="err">`</span><span class="o">≠</span><span class="err">`</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="sr">[</span><span class="nv">comparison</span><span class="w"> </span><span class="nv">function</span><span class="sr">]</span><span class="p">(</span><span class="nv">https</span><span class="bp">:</span><span class="na">//</span><span class="nv">aplwiki</span><span class="na">.</span><span class="nv">com</span><span class="na">/</span><span class="nv">wiki</span><span class="na">/</span><span class="nv">Comparison_function</span><span class="w"> </span><span class="s2">&quot;Comparison function&quot;</span><span class="p">)</span><span class="w">  </span><span class="nv">tests</span><span class="w"> </span><span class="nv">whether</span><span class="w"> </span><span class="nv">arguments</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">unequal</span><span class="na">.</span><span class="w"> </span><span class="nv">This</span><span class="w"> </span><span class="nv">returns</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">boolean</span><span class="w"> </span><span class="nv">array</span><span class="w"> </span><span class="nv">where</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="nv">indicates</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">non</span><span class="o">-</span><span class="nv">integers</span><span class="na">.</span><span class="w"> </span>
<span class="m">3</span><span class="na">.</span><span class="w"> </span><span class="err">`</span><span class="bp">⍵</span><span class="na">/</span><span class="err">`</span><span class="w">  </span><span class="sr">[</span><span class="nv">Compress</span><span class="sr">]</span><span class="p">(</span><span class="nv">https</span><span class="bp">:</span><span class="na">//</span><span class="nv">mastering</span><span class="na">.</span><span class="nv">dyalog</span><span class="na">.</span><span class="nv">com</span><span class="na">/</span><span class="nv">Some</span><span class="o">-</span><span class="nv">Primitive</span><span class="o">-</span><span class="nv">Functions</span><span class="na">.</span><span class="nv">html</span><span class="o">?</span><span class="nv">highlight</span><span class="o">=</span><span class="nv">compress</span><span class="c1">#replicate) filters the right argument using the boolean array on the left. </span>
<span class="m">4</span><span class="na">.</span><span class="w"> </span><span class="sr">[</span><span class="nv">Commute</span><span class="sr">]</span><span class="p">(</span><span class="nv">https</span><span class="bp">:</span><span class="na">//</span><span class="nv">aplwiki</span><span class="na">.</span><span class="nv">com</span><span class="na">/</span><span class="nv">wiki</span><span class="na">/</span><span class="nv">Commute</span><span class="p">)</span><span class="w"> </span><span class="err">`</span><span class="na">⍨</span><span class="err">`</span><span class="w"> </span><span class="nv">aka</span><span class="w"> </span><span class="nv">Swap</span><span class="w"> </span><span class="nv">used</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">put</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">boolean</span><span class="w"> </span><span class="nv">array</span><span class="w"> </span><span class="nv">generated</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">Step</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="nv">on</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">left</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">Compress</span><span class="na">.</span><span class="w"> </span>

<span class="nv">B</span>
<span class="m">1</span><span class="na">.</span><span class="w"> </span><span class="err">`</span><span class="p">(</span><span class="o">≠</span><span class="na">∘</span><span class="o">⌊</span><span class="na">⍨</span><span class="p">)</span><span class="err">`</span><span class="w">  </span><span class="sr">[</span><span class="nv">Selfie</span><span class="sr">]</span><span class="p">(</span><span class="nv">https</span><span class="bp">:</span><span class="na">//</span><span class="nv">mastering</span><span class="na">.</span><span class="nv">dyalog</span><span class="na">.</span><span class="nv">com</span><span class="na">/</span><span class="nv">Tacit</span><span class="o">-</span><span class="nv">Programming</span><span class="na">.</span><span class="nv">html</span><span class="o">?</span><span class="nv">highlight</span><span class="o">=</span><span class="nv">selfie</span><span class="c1">#commute-selfie-and-constant) `⍨` - used monadically, the same argument gets used on both sides of the function. Thus, `F⍨y` is equivalent to - `y F y`.</span>
<span class="m">2</span><span class="na">.</span><span class="w"> </span><span class="err">`</span><span class="na">∘</span><span class="err">`</span><span class="w"> </span><span class="nv">Preprocess</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">right</span><span class="w"> </span><span class="nv">argument</span><span class="w"> </span><span class="err">`</span><span class="o">≠</span><span class="err">`</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">Floor</span><span class="w"> </span><span class="err">`</span><span class="o">⌊</span><span class="err">`</span>
<span class="m">3</span><span class="na">.</span><span class="w"> </span><span class="err">`</span><span class="p">(</span><span class="na">/⍨</span><span class="p">)</span><span class="na">∘</span><span class="err">`</span><span class="w"> </span><span class="nv">This</span><span class="w"> </span><span class="nv">time</span><span class="w"> </span><span class="nv">preprocess</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">right</span><span class="w"> </span><span class="nv">argument</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">Filter</span><span class="w"> </span><span class="err">`</span><span class="na">/</span><span class="err">`</span><span class="w">  </span><span class="nv">Using</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">original</span><span class="w"> </span><span class="nv">test</span><span class="w"> </span><span class="nv">data</span><span class="na">.</span><span class="w"> </span>
<span class="m">4</span><span class="na">.</span><span class="w"> </span><span class="nv">The</span><span class="w"> </span><span class="nv">first</span><span class="w"> </span><span class="nv">Selfie</span><span class="w"> </span><span class="nv">flips</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">whole</span><span class="w"> </span><span class="nv">expression</span><span class="na">.</span><span class="w"> </span>
<span class="m">5</span><span class="na">.</span><span class="w"> </span><span class="nv">See</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">comment</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">Dfn</span><span class="w"> </span><span class="nv">version</span>

<span class="nv">Comparison</span><span class="w"> </span><span class="nv">Tolerance</span>
<span class="err">```</span><span class="nv">APL</span>
<span class="nv">T</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="m">1e¯13</span><span class="o">+⍳</span><span class="m">15</span><span class="w"> </span><span class="c1">⍝ Test Data using 13 decimals</span>
<span class="m">14</span><span class="o">⍕</span><span class="nv">w</span><span class="w"> </span><span class="c1">⍝ Format using 14 decimals</span>

<span class="nv">C</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="kt">{</span><span class="nf">⎕CT</span><span class="kd">←</span><span class="m">0</span><span class="w"> </span><span class="p">⋄</span><span class="w"> </span><span class="bp">⍵</span><span class="na">/⍨</span><span class="bp">⍵</span><span class="o">≠⌊</span><span class="bp">⍵</span><span class="kt">}</span><span class="w"> </span><span class="c1">⍝ Set the comparison tolerance to zero and apply solution A. </span>
<span class="w">	</span><span class="err">```</span>

<span class="nv">C</span>
<span class="m">1</span><span class="na">.</span><span class="w"> </span><span class="sr">[</span><span class="nv">Comparison</span><span class="w"> </span><span class="nv">Tolerance</span><span class="sr">]</span><span class="p">(</span><span class="nv">https</span><span class="bp">:</span><span class="na">//</span><span class="nv">help</span><span class="na">.</span><span class="nv">dyalog</span><span class="na">.</span><span class="nv">com</span><span class="na">/</span><span class="nv">latest</span><span class="na">/</span><span class="nv">Content</span><span class="na">/</span><span class="nv">Language</span><span class="na">/</span><span class="nv">System</span><span class="err">%</span><span class="m">20</span><span class="nv">Functions</span><span class="na">/</span><span class="nv">ct</span><span class="na">.</span><span class="nv">htm</span><span class="p">)</span><span class="w"> </span><span class="err">`</span><span class="nf">⎕CT</span><span class="err">`</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nv">determines</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">precision</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">which</span><span class="w"> </span><span class="nv">two</span><span class="w"> </span><span class="nv">numbers</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">judged</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">equal</span><span class="na">.</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span><span class="nv">value</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="nv">ensures</span><span class="w"> </span><span class="nv">exact</span><span class="w"> </span><span class="nv">comparison</span><span class="na">.</span><span class="w"> </span>
<span class="m">2</span><span class="na">.</span><span class="w"> </span><span class="nv">Apply</span><span class="w"> </span><span class="nv">solution</span><span class="w"> </span><span class="nv">A</span><span class="w"> </span>

<span class="nv">Data</span><span class="w"> </span><span class="nv">Representation</span>
<span class="err">```</span><span class="nv">APL</span>
<span class="nv">D</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="kt">{</span><span class="bp">⍵</span><span class="na">/⍨</span><span class="m">645</span><span class="o">=</span><span class="nf">⎕DR</span><span class="na">¨</span><span class="bp">⍵</span><span class="kt">}</span><span class="w"> </span><span class="c1">⍝ 645 is 64 bit per element and 5 means it&#39;s floating point</span>
<span class="nv">x</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="nv">v</span><span class="o">,</span><span class="m">1e400</span><span class="w"> </span><span class="c1">⍝ Test Data</span>
<span class="nv">E</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="kt">{</span><span class="bp">⍵</span><span class="na">/⍨</span><span class="m">645</span><span class="w"> </span><span class="m">1287</span><span class="o">∊</span><span class="na">⍨</span><span class="nf">⎕DR</span><span class="na">¨</span><span class="bp">⍵</span><span class="kt">}</span><span class="w"> </span><span class="c1">⍝ 1287 is a 128-bit decimal float. 7 indicates Decimal.  </span>
<span class="w">	</span><span class="err">```</span>

<span class="nv">D</span><span class="w"> </span>
<span class="m">1</span><span class="na">.</span><span class="w"> </span><span class="sr">[</span><span class="nv">Data</span><span class="w"> </span><span class="nv">Representation</span><span class="sr">]</span><span class="p">(</span><span class="nv">https</span><span class="bp">:</span><span class="na">//</span><span class="nv">help</span><span class="na">.</span><span class="nv">dyalog</span><span class="na">.</span><span class="nv">com</span><span class="na">/</span><span class="nv">latest</span><span class="na">/</span><span class="nv">Content</span><span class="na">/</span><span class="nv">Language</span><span class="na">/</span><span class="nv">System</span><span class="err">%</span><span class="m">20</span><span class="nv">Functions</span><span class="na">/</span><span class="nv">Data</span><span class="err">%</span><span class="m">20</span><span class="nv">Representation</span><span class="err">%</span><span class="m">20</span><span class="nv">Dyadic</span><span class="na">.</span><span class="nv">htm</span><span class="p">)</span><span class="w"> </span><span class="err">`</span><span class="nf">⎕DR</span><span class="err">`</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nv">converts</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="nv">type</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">its</span><span class="w"> </span><span class="nv">argument</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="nv">according</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">type</span><span class="w"> </span><span class="nv">specification</span><span class="w"> </span><span class="nv">X</span><span class="na">.</span><span class="w"> </span><span class="nv">Here</span><span class="w"> </span><span class="nv">we</span><span class="w"> </span><span class="nv">check</span><span class="w"> </span><span class="nv">if</span><span class="w"> </span><span class="err">`</span><span class="nf">⎕DR</span><span class="err">`</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="m">645</span><span class="w"> </span><span class="p">(</span><span class="m">64</span><span class="w"> </span><span class="nv">means</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="m">64</span><span class="w"> </span><span class="nv">bit</span><span class="w"> </span><span class="nv">per</span><span class="w"> </span><span class="nv">element</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="nv">means</span><span class="w"> </span><span class="nv">it</span><span class="s1">&#39;s floating point) is equal to [Each](https://aplwiki.com/wiki/Each) `¨` element of omega. </span>
<span class="s1">2.  `⍵/⍨` First [Swapping](https://mastering.dyalog.com/Tacit-Programming.html?highlight=selfie#commute-selfie-and-constant) `⍨`  the arguments. [Compress](https://mastering.dyalog.com/Some-Primitive-Functions.html?highlight=compress#replicate) `⍵/` filters the right argument using the boolean array (Result of Step 1) on the left. </span>

<span class="s1">E</span>
<span class="s1">1. `645 1287∊⍨⎕DR¨⍵` Swapping the arguments and checking if 645 or 1287 are [Members](https://aplwiki.com/wiki/Membership) `∊` of the Data Representiaton of Each element in omega. </span>
<span class="s1">2. `⍵/⍨` We then filter the result against the original.  First [Swapping](https://mastering.dyalog.com/Tacit-Programming.html?highlight=selfie#commute-selfie-and-constant) `⍨`  the arguments. [Compress](https://mastering.dyalog.com/Some-Primitive-Functions.html?highlight=compress#replicate) `⍵/` filters the right argument using the boolean array (Result of Step 1) on the left. </span>

<span class="s1">Print Precision</span>
<span class="s1">```APL</span>
<span class="s1">F ← {⍵/⍨&#39;</span><span class="na">.</span><span class="s1">&#39;∊∘⍕¨⍵}</span>
<span class="s1">G ← {⎕PP←34 ⋄ ⍵/⍨&#39;</span><span class="na">.</span><span class="s1">&#39;∊∘⍕¨⍵} ⍝ Solution for near integers</span>
<span class="s1">	```</span>

<span class="s1">F</span>
<span class="s1">1. `⍕¨⍵` [Format](https://aplwiki.com/wiki/Format) `⍕` Each `¨` formats the right [argument](https://aplwiki.com/wiki/Argument &quot;Argument&quot;) into a [simple](https://aplwiki.com/wiki/Simple &quot;Simple&quot;) [character](https://aplwiki.com/index.php?title=Character&amp;action=edit&amp;redlink=1 &quot;Character (page does not exist)&quot;) array.</span>
<span class="s1">2. `&#39;</span><span class="na">.</span><span class="s1">&#39;∊` Checks if `&#39;</span><span class="na">.</span><span class="s1">&#39;` is a member of the each formated element of Omega `⍵`.</span>
<span class="s1">3. `⍵/⍨` Filters the original argument against the result of Step 2.  </span>

<span class="s1">G</span>
<span class="s1">1. `⎕PP←34` [Print Precision](https://help.dyalog.com/latest/Content/Language/System%20Functions/pp.htm) `⎕PP` - number of significant digits in the display of numeric output. Default is 10. Max is 34. </span>
<span class="s1">2. Apply the Function in F.</span>
<span class="s1">   </span>
<span class="s1"> </span>
<span class="s1">Signum</span>
<span class="s1">```APL</span>
<span class="s1">H ← {⍵/⍨×1|⍵}</span>
<span class="s1">I ← {⎕CT←0 ⋄ ⍵/⍨×1|⍵} ⍝ Solution for near integers</span>
<span class="s1">J ← {⍵/⍨×1⊤⍵}</span>
<span class="s1">	```</span>

<span class="s1">H</span>
<span class="s1">1. `1|⍵` [Residue](https://aplwiki.com/wiki/Residue) `|` - aka Modulo - gives the [remainder](https://en.wikipedia.org/wiki/Remainder &quot;wikipedia:Remainder&quot;) of [division](https://aplwiki.com/wiki/Divide &quot;Divide&quot;) between two real numbers.</span>
<span class="s1">2. `×`  [Signum](https://aplwiki.com/wiki/Signum) `×` -  three possible results of Signum on a real argument are `0`, `1`, and `¯1` : Positive, Negative and Zero. Signum will always be positive or zero in this case. </span>
<span class="s1">3. If we check the remainder when divding by 1 we can filter the result based on if the Signum is 1 or 0.</span>
<span class="s1">4. Floating point numbers will have a positive signum of the remainder or 1. </span>
<span class="s1">5. `⍵/⍨` We can then apply this [Boolean Mask](https://aplwiki.com/wiki/Boolean) against our orginal argument. </span>

<span class="s1">I</span>
<span class="s1">1. `⎕CT←0` [Comparison Tolerance](https://help.dyalog.com/latest/Content/Language/System%20Functions/ct.htm) `⎕CT` - determines the precision with which two numbers are judged to be equal. Setting this to zero means all our numbers are considered to be floating point. </span>
<span class="s1">2. We can then Apply the function in H. </span>


<span class="s1">J</span>
<span class="s1">1. `1⊤⍵` [Encode](https://mastering.dyalog.com/Mathematical-Functions.html?highlight=encode#encode) `⊤` - Checking if the smallest unit in the base is a one and how many ones there are. This is exactly the same as division remainder. Encode doesn&#39;</span><span class="nv">t</span><span class="w"> </span><span class="nv">care</span><span class="w"> </span><span class="nv">about</span><span class="w"> </span><span class="sr">[</span><span class="nv">Comparison</span><span class="w"> </span><span class="nv">Tolerance</span><span class="sr">]</span><span class="p">(</span><span class="nv">https</span><span class="bp">:</span><span class="na">//</span><span class="nv">help</span><span class="na">.</span><span class="nv">dyalog</span><span class="na">.</span><span class="nv">com</span><span class="na">/</span><span class="nv">latest</span><span class="na">/</span><span class="nv">Content</span><span class="na">/</span><span class="nv">Language</span><span class="na">/</span><span class="nv">System</span><span class="err">%</span><span class="m">20</span><span class="nv">Functions</span><span class="na">/</span><span class="nv">ct</span><span class="na">.</span><span class="nv">htm</span><span class="p">)</span><span class="w"> </span><span class="err">`</span><span class="nf">⎕CT</span><span class="err">`</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">always</span><span class="w"> </span><span class="m">0</span><span class="na">.</span><span class="w"> </span>
<span class="m">2</span><span class="na">.</span><span class="w"> </span><span class="err">`</span><span class="o">×</span><span class="err">`</span><span class="w">  </span><span class="sr">[</span><span class="nv">Signum</span><span class="sr">]</span><span class="p">(</span><span class="nv">https</span><span class="bp">:</span><span class="na">//</span><span class="nv">aplwiki</span><span class="na">.</span><span class="nv">com</span><span class="na">/</span><span class="nv">wiki</span><span class="na">/</span><span class="nv">Signum</span><span class="p">)</span><span class="w"> </span><span class="err">`</span><span class="o">×</span><span class="err">`</span><span class="w"> </span><span class="o">-</span><span class="w">  </span><span class="nv">three</span><span class="w"> </span><span class="nv">possible</span><span class="w"> </span><span class="nv">results</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">Signum</span><span class="w"> </span><span class="nv">on</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">real</span><span class="w"> </span><span class="nv">argument</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="err">`</span><span class="m">0</span><span class="err">`</span><span class="o">,</span><span class="w"> </span><span class="err">`</span><span class="m">1</span><span class="err">`</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="err">`</span><span class="m">¯1</span><span class="err">`</span><span class="w"> </span><span class="bp">:</span><span class="w"> </span><span class="nv">Positive</span><span class="o">,</span><span class="w"> </span><span class="nv">Negative</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">Zero</span><span class="na">.</span><span class="w"> </span><span class="nv">Signum</span><span class="w"> </span><span class="nv">will</span><span class="w"> </span><span class="nv">always</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">positive</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">zero</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">case</span><span class="na">.</span><span class="w"> </span>
<span class="m">3</span><span class="na">.</span><span class="w"> </span><span class="err">`</span><span class="bp">⍵</span><span class="na">/⍨</span><span class="err">`</span><span class="w"> </span><span class="nv">We</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">then</span><span class="w"> </span><span class="nv">apply</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="sr">[</span><span class="nv">Boolean</span><span class="w"> </span><span class="nv">Mask</span><span class="sr">]</span><span class="p">(</span><span class="nv">https</span><span class="bp">:</span><span class="na">//</span><span class="nv">aplwiki</span><span class="na">.</span><span class="nv">com</span><span class="na">/</span><span class="nv">wiki</span><span class="na">/</span><span class="nv">Boolean</span><span class="p">)</span><span class="w"> </span><span class="nv">against</span><span class="w"> </span><span class="nv">our</span><span class="w"> </span><span class="nv">orginal</span><span class="w"> </span><span class="nv">argument</span><span class="na">.</span><span class="w"> </span>

<span class="nv">Subtract</span>
<span class="err">```</span><span class="nv">APL</span>
<span class="nv">K</span><span class="w"> </span><span class="kd">←</span><span class="w"> </span><span class="kt">{</span><span class="bp">⍵</span><span class="na">/⍨</span><span class="m">0</span><span class="o">≠</span><span class="bp">⍵</span><span class="o">-⌊</span><span class="bp">⍵</span><span class="kt">}</span><span class="w"> </span><span class="c1">⍝ In any comparison with a true zero, the comparison tolerance doesn&#39;t matter</span>
<span class="w">	</span><span class="err">```</span>

<span class="nv">K</span>
<span class="m">1</span><span class="na">.</span><span class="w"> </span><span class="err">`</span><span class="m">0</span><span class="o">≠</span><span class="bp">⍵</span><span class="o">-⌊</span><span class="bp">⍵</span><span class="err">`</span><span class="w"> </span><span class="nv">Subtracting</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">argument</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="nv">it</span><span class="s1">&#39;s [Floor](https://aplwiki.com/wiki/Floor) `⌊`  and comparing the result against [Not Equal to](https://aplwiki.com/wiki/Not_Equal_to) `≠` Zero. </span>
<span class="s1">2. `⍵/⍨` Use the result to filter the argument. </span>

<span class="s1">Replicate and Error Guard</span>
<span class="s1">```APL</span>
<span class="s1">L ← ∊{0::⍵⋄⍵/⍬}¨ ⍝ If any error happens, that means that the test that the argument is non-integer, and we want it. Otherwise, we replicate the empty vector, which gives us the empty vector.</span>
<span class="s1">	```</span>

<span class="s1">L</span>
<span class="s1">1. `⍵/⍬` [Replicate](https://aplwiki.com/wiki/Replicate) `/` - copies each [element](https://aplwiki.com/wiki/Element &quot;Element&quot;) of the right [argument](https://aplwiki.com/wiki/Argument &quot;Argument&quot;) a given number of times - left argument will error on any non integer. Apply Omega `⍵` against Zilde `⍬` - the empty vector.</span>
<span class="s1">2. `0::⍵` [Error Guard](http://help.dyalog.com/18.0/index.htm#Language/Defined%20Functions%20and%20Operators/DynamicFunctions/Error%20Guards.htm) `::` is a vector of error numbers :: expression to be evaluated</span>
<span class="s1">3. `∊{}¨` [Membership](https://aplwiki.com/wiki/Membership) `∊` - tests if [Each](https://aplwiki.com/wiki/Each) `¨` of the elements of the left [argument](https://aplwiki.com/wiki/Argument &quot;Argument&quot;) appears as an element of the right argument. </span>


<span class="s1">**Glyphs Used:**</span>
<span class="s1">[Floor](https://aplwiki.com/wiki/Floor) `⌊` - a [monadic](https://aplwiki.com/wiki/Monadic &quot;Monadic&quot;) [scalar function](https://aplwiki.com/wiki/Scalar_function &quot;Scalar function&quot;) that gives the [floor](https://en.wikipedia.org/wiki/floor_and_ceiling_functions &quot;wikipedia:floor and ceiling functions&quot;) of a real number</span>
<span class="s1">[Equal to](https://aplwiki.com/wiki/Equal_to)  `=` - a [comparison function](https://aplwiki.com/wiki/Comparison_function &quot;Comparison function&quot;) which tests whether argument elements are equal to each other.</span>
<span class="s1">[Not Equal to](https://aplwiki.com/wiki/Not_Equal_to) `≠` - a [comparison function](https://aplwiki.com/wiki/Comparison_function &quot;Comparison function&quot;) which tests whether argument elements are unequal.</span>
<span class="s1">[Compress](https://aplwiki.com/wiki/Replicate) `/` - aka FIlter - requires the number of copies to be [Boolean](https://aplwiki.com/wiki/Boolean &quot;Boolean&quot;): each element is either retained (1 copy) or discarded (0 copies)</span>
<span class="s1">[Commute](https://aplwiki.com/wiki/Commute) `⍨` - aka Swap - used dyadically, the arguments are swapped. </span>
<span class="s1">[Selfie](https://mastering.dyalog.com/Tacit-Programming.html?highlight=selfie#commute-selfie-and-constant) `⍨` - used monadically, the same argument gets used on both sides of the function. Thus, `F⍨y` is equivalent to - `y F y`.</span>
<span class="s1">[Format](https://aplwiki.com/wiki/Format) `⍕` - Dydactic column width and the number of decimal places for formatting [numeric](https://aplwiki.com/index.php?title=Numeric&amp;action=edit&amp;redlink=1 &quot;Numeric (page does not exist)&quot;) arrays</span>
<span class="s1">[Comparison Tolerance](https://help.dyalog.com/latest/Content/Language/System%20Functions/ct.htm) `⎕CT` - determines the precision with which two numbers are judged to be equal</span>
<span class="s1">[Data Representation](https://help.dyalog.com/latest/Content/Language/System%20Functions/Data%20Representation%20Dyadic.htm) `⎕DR` - converts the data type of its argument Y according to the type specification X</span>
<span class="s1">[Each](https://aplwiki.com/wiki/Each) `¨` - applies its [operand](https://aplwiki.com/wiki/Operand &quot;Operand&quot;) to each [element](https://aplwiki.com/wiki/Element &quot;Element&quot;) of the [arguments](https://aplwiki.com/wiki/Argument &quot;Argument&quot;)</span>
<span class="s1">[Membership](https://aplwiki.com/wiki/Membership) `∊` - tests if each of the elements of the left [argument](https://aplwiki.com/wiki/Argument &quot;Argument&quot;) appears as an element of the right argument</span>
<span class="s1">[Print Precision](https://help.dyalog.com/latest/Content/Language/System%20Functions/pp.htm) `⎕PP` - number of significant digits in the display of numeric output</span>
<span class="s1">[Residue](https://aplwiki.com/wiki/Residue) `|` - aka Modulo - gives the [remainder](https://en.wikipedia.org/wiki/Remainder &quot;wikipedia:Remainder&quot;) of [division](https://aplwiki.com/wiki/Divide &quot;Divide&quot;) between two real numbers.</span>
<span class="s1">[Signum](https://aplwiki.com/wiki/Signum) `×` -  three poss ible results of Signum on a real argument are `0`, `1`, and `¯1` : Positive, Negative and Zero</span>
<span class="s1">[Encode](https://mastering.dyalog.com/Mathematical-Functions.html?highlight=encode#encode) `⊤` - `A⊤B`, turns `B` into a list(s) of digits in (mixed) base</span>
<span class="s1">[Replicate](https://aplwiki.com/wiki/Replicate) `/` - copies each [element](https://aplwiki.com/wiki/Element &quot;Element&quot;) of the right [argument](https://aplwiki.com/wiki/Argument &quot;Argument&quot;) a given number of times</span>
<span class="s1">[Error Guard](http://help.dyalog.com/18.0/index.htm#Language/Defined%20Functions%20and%20Operators/DynamicFunctions/Error%20Guards.htm) `::` - vector of error numbers :: expression to be evaluated</span>

<span class="s1">**Concepts Used:**</span>
<span class="s1">[Dfn](https://aplwiki.com/wiki/Dfn)</span>
<span class="s1">[Tacit Programming](https://aplwiki.com/wiki/Tacit_programming)</span>
<span class="s1">[Comparison Tolerance](https://www.jsoftware.com/papers/satn23.htm) </span>
<span class="s1">[Function Composition](http://help.dyalog.com/latest/index.htm#Language/Primitive%20Operators/Operator%20Syntax.htm#Function_Composition)</span>
<span class="s1">[Hook](https://aplwiki.com/wiki/Hook)</span>
<span class="s1">[Derived Function](https://aplwiki.com/wiki/Derived_function)</span>
<span class="s1">[Modulo Operation](https://en.wikipedia.org/wiki/Modulo_operation)</span>

<span class="s1">**Note:**</span>
<span class="s1">&lt;mark style=&quot;background: #FFF3A3A6;&quot;&gt;Ft &lt;/mark&gt; ← Tacit Derived Function - Composed of Operators</span>
<span class="s1">Beginning with the first Parenthesis `(≠∘⌊⍨)`</span>
<span class="s1">1.  ⌊&lt;mark style=&quot;background: #ADCCFFA6;&quot;&gt;⍨&lt;/mark&gt; ⍵ - Compare Argument with it&#39;</span><span class="nv">s</span><span class="w"> </span><span class="nv">own</span><span class="w"> </span><span class="nv">Floor</span><span class="bp">:</span><span class="w">  </span><span class="nv">Selfie</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="na">⍨</span>
<span class="m">2</span><span class="na">.</span><span class="w">  </span><span class="o">≠&lt;</span><span class="nv">mark</span><span class="w"> </span><span class="nv">style</span><span class="o">=</span><span class="s2">&quot;background: #BBFABBA6;&quot;</span><span class="o">&gt;</span><span class="na">∘</span><span class="o">&lt;</span><span class="na">/</span><span class="nv">mark</span><span class="o">&gt;⌊</span><span class="na">⍨</span><span class="w"> </span><span class="bp">⍵</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nv">Preprocess</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">right</span><span class="w"> </span><span class="nv">argument</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="err">`</span><span class="o">≠</span><span class="err">`</span><span class="w"> </span><span class="nv">using</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">floor</span><span class="bp">:</span><span class="w"> </span><span class="nv">Jot</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="na">∘</span>
<span class="m">3</span><span class="na">.</span><span class="w">   </span><span class="o">&lt;</span><span class="nv">mark</span><span class="w"> </span><span class="nv">style</span><span class="o">=</span><span class="s2">&quot;background: #FFB8EBA6;&quot;</span><span class="o">&gt;</span><span class="na">/⍨</span><span class="o">&lt;</span><span class="na">/</span><span class="nv">mark</span><span class="o">&gt;&lt;</span><span class="nv">mark</span><span class="w"> </span><span class="nv">style</span><span class="o">=</span><span class="s2">&quot;background: #BBFABBA6;&quot;</span><span class="o">&gt;</span><span class="na">∘</span><span class="o">&lt;</span><span class="na">/</span><span class="nv">mark</span><span class="o">&gt;</span><span class="bp">⍺⍺</span><span class="o">-</span><span class="w"> </span><span class="nv">Preprocess</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">right</span><span class="w"> </span><span class="nv">parenthesis</span><span class="w"> </span><span class="nv">expression</span><span class="w"> </span><span class="nv">using</span><span class="w"> </span><span class="nv">Jot</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">then</span><span class="w"> </span><span class="nv">Swap</span>
<span class="m">4</span><span class="na">.</span><span class="w">   </span><span class="o">&lt;</span><span class="nv">mark</span><span class="w"> </span><span class="nv">style</span><span class="o">=</span><span class="s2">&quot;background: #ADCCFFA6;&quot;</span><span class="o">&gt;</span><span class="bp">⍺⍺</span><span class="na">/</span><span class="w"> </span><span class="bp">⍵</span><span class="w"> </span><span class="na">⍨</span><span class="w"> </span><span class="bp">⍵</span><span class="o">&lt;</span><span class="na">/</span><span class="nv">mark</span><span class="o">&gt;</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nv">Filter</span><span class="w"> </span><span class="nv">initial</span><span class="w"> </span><span class="nv">array</span><span class="w"> </span><span class="nv">using</span><span class="w"> </span><span class="nv">result</span><span class="bp">:</span><span class="w"> </span><span class="nv">Selfie</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="na">⍨</span>

<span class="o">**</span><span class="nv">Comment</span><span class="bp">:</span><span class="o">**</span><span class="w"> </span>
<span class="nv">Swap</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="nv">mark</span><span class="w"> </span><span class="nv">style</span><span class="o">=</span><span class="s2">&quot;background: #FFB8EBA6;&quot;</span><span class="o">&gt;</span><span class="bp">⍺</span><span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="na">⍨</span><span class="w"> </span><span class="bp">⍵</span><span class="o">&lt;</span><span class="na">/</span><span class="nv">mark</span><span class="o">&gt;</span><span class="w">  </span><span class="nv">is</span><span class="w">  </span><span class="o">&lt;</span><span class="nv">mark</span><span class="w"> </span><span class="nv">style</span><span class="o">=</span><span class="s2">&quot;background: #FFB8EBA6;&quot;</span><span class="o">&gt;</span><span class="bp">⍵</span><span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="bp">⍺</span><span class="o">&lt;</span><span class="na">/</span><span class="nv">mark</span><span class="o">&gt;</span><span class="w">  </span>
<span class="nv">Selfie</span><span class="o">-</span><span class="w"> </span><span class="o">&lt;</span><span class="nv">mark</span><span class="w"> </span><span class="nv">style</span><span class="o">=</span><span class="s2">&quot;background: #ADCCFFA6;&quot;</span><span class="o">&gt;</span><span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="na">⍨</span><span class="w"> </span><span class="bp">⍵</span><span class="o">&lt;</span><span class="na">/</span><span class="nv">mark</span><span class="o">&gt;</span><span class="w">  </span><span class="nv">is</span><span class="w">  </span><span class="o">&lt;</span><span class="nv">mark</span><span class="w"> </span><span class="nv">style</span><span class="o">=</span><span class="s2">&quot;background: #ADCCFFA6;&quot;</span><span class="o">&gt;</span><span class="bp">⍵</span><span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="bp">⍵</span><span class="o">&lt;</span><span class="na">/</span><span class="nv">mark</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="nv">mark</span><span class="w"> </span><span class="nv">style</span><span class="o">=</span><span class="s2">&quot;background: #BBFABBA6;&quot;</span><span class="o">&gt;</span><span class="nv">Jot</span><span class="w"> </span><span class="o">&lt;</span><span class="na">/</span><span class="nv">mark</span><span class="o">&gt;</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="kt">{</span><span class="nv">R</span><span class="kt">}</span><span class="kd">←</span><span class="kt">{</span><span class="nv">X</span><span class="kt">}</span><span class="w"> </span><span class="nv">f</span><span class="na">∘</span><span class="nv">g</span><span class="w"> </span><span class="nv">Y</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nv">Preprocess</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">right</span><span class="w"> </span><span class="nv">argument</span><span class="na">.</span><span class="w"> </span><span class="nv">Then</span><span class="w"> </span><span class="nv">apply</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">left</span><span class="na">.</span>

<span class="o">**</span><span class="nv">Transcript</span><span class="bp">:</span><span class="o">**</span>
<span class="nv">Hello</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">welcome</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">APL</span><span class="w"> </span><span class="nv">quest</span><span class="na">.</span><span class="w"> </span><span class="nv">See</span><span class="w"> </span><span class="nv">APL</span><span class="w"> </span><span class="nv">wiki</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">details</span><span class="na">.</span><span class="w"> </span><span class="nv">Today</span><span class="s1">&#39;s quest is called Float your Boat. We are to select the numbers from a vector of numbers that are floating point or non-integers, and this is problem seven from the 2013 APL problem-solving competition. It&#39;</span><span class="nv">s</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">bit</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">interesting</span><span class="w"> </span><span class="nv">thing</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">it</span><span class="s1">&#39;s not well defined what exactly constitutes a floating point number or a non-integer number because in APL, a number is a number. There&#39;</span><span class="nv">s</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">really</span><span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">good</span><span class="w"> </span><span class="nv">distinction</span><span class="o">,</span><span class="w"> </span><span class="nv">but</span><span class="w"> </span><span class="nv">we</span><span class="s1">&#39;ll do our best, and any of these solutions would be considered correct.</span>

<span class="s1">Let&#39;</span><span class="nv">s</span><span class="w"> </span><span class="nv">start</span><span class="w"> </span><span class="nv">off</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">creating</span><span class="w"> </span><span class="nv">some</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">ourselves</span><span class="na">.</span><span class="w"> </span><span class="nv">What</span><span class="w"> </span><span class="nv">constitutes</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">number</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">isn</span><span class="s1">&#39;t an integer? Well, there are various ways to approach this. A very simple one and probably the best method really is to compare the number to what would happen to it if we were to round it. So any number that&#39;</span><span class="nv">s</span><span class="w"> </span><span class="nv">integer</span><span class="w"> </span><span class="nv">stays</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">same</span><span class="w"> </span><span class="nv">when</span><span class="w"> </span><span class="nv">rounded</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">number</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">isn</span><span class="s1">&#39;t integer would change. The floor of this vector gives us these integers, and then we can compare, and these give us the integers, but we&#39;</span><span class="nv">re</span><span class="w"> </span><span class="nv">actually</span><span class="w"> </span><span class="nv">interested</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">non</span><span class="o">-</span><span class="nv">integers</span><span class="o">,</span><span class="w"> </span><span class="nv">so</span><span class="w"> </span><span class="nv">let</span><span class="s1">&#39;s go change that, and then we can use this to filter, and this gives us the non-integers.</span>

<span class="s1">We can put this into a function. Let&#39;</span><span class="nv">s</span><span class="w"> </span><span class="nv">call</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">name</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">argument</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">there</span><span class="w"> </span><span class="nv">you</span><span class="w"> </span><span class="nv">go</span><span class="na">.</span><span class="w"> </span><span class="nv">Somebody</span><span class="w"> </span><span class="nv">who</span><span class="w"> </span><span class="nv">participated</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">live</span><span class="w"> </span><span class="nv">chat</span><span class="w"> </span><span class="nv">event</span><span class="w"> </span><span class="nv">noticed</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">actually</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">written</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">entirely</span><span class="w"> </span><span class="nv">derived</span><span class="w"> </span><span class="nv">function</span><span class="o">,</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">even</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">train</span><span class="w"> </span><span class="nv">but</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">tested</span><span class="w"> </span><span class="nv">derived</span><span class="w"> </span><span class="nv">function</span><span class="o">,</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">function</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">entirely</span><span class="w"> </span><span class="nv">composed</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">operators</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">functions</span><span class="w"> </span><span class="nv">together</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">we</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">see</span><span class="w"> </span><span class="nv">how</span><span class="w"> </span><span class="nv">we</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">transform</span><span class="w"> </span><span class="nv">f</span><span class="w"> </span><span class="nv">into</span><span class="w"> </span><span class="nv">such</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">thing</span><span class="na">.</span>

<span class="nv">So</span><span class="w"> </span><span class="nv">let</span><span class="s1">&#39;s have this tacit form. First, we want to compare the argument with its own floor, so the way we can do it is we want to use the function unequal dyadically using the same argument on both sides, so that means we need a selfie or commute operator here.</span>

<span class="s1">Let&#39;</span><span class="nv">s</span><span class="w"> </span><span class="nv">get</span><span class="w"> </span><span class="nv">rid</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">some</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">noise</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">then</span><span class="w"> </span><span class="nv">we</span><span class="w"> </span><span class="nv">want</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">preprocess</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">right</span><span class="w"> </span><span class="nv">argument</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">unequal</span><span class="w"> </span><span class="nv">using</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">floor</span><span class="o">,</span><span class="w"> </span><span class="nv">keeping</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">left</span><span class="w"> </span><span class="nv">argument</span><span class="w"> </span><span class="nv">just</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">outer</span><span class="w"> </span><span class="nv">argument</span><span class="w"> </span><span class="nv">itself</span><span class="na">.</span><span class="w"> </span>

<span class="nv">This</span><span class="w"> </span><span class="nv">places</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">same</span><span class="w"> </span><span class="nv">argument</span><span class="w"> </span><span class="nv">on</span><span class="w"> </span><span class="nv">both</span><span class="w"> </span><span class="nv">sides</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">we</span><span class="w"> </span><span class="nv">flow</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">right</span><span class="w"> </span><span class="nv">side</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">then</span><span class="w"> </span><span class="nv">we</span><span class="w"> </span><span class="nv">feed</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">into</span><span class="w"> </span><span class="nv">unequal</span><span class="na">.</span><span class="w"> </span><span class="nv">I</span><span class="w"> </span><span class="nv">like</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">think</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">jot</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">compose</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">beside</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">preprocessing</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">right</span><span class="w"> </span><span class="nv">argument</span><span class="na">.</span><span class="w"> </span><span class="nv">So</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">unequal</span><span class="w"> </span><span class="nv">while</span><span class="w"> </span><span class="nv">preprocessing</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">right</span><span class="w"> </span><span class="nv">argument</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">floor</span><span class="w"> </span><span class="nv">using</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">same</span><span class="w"> </span><span class="nv">argument</span><span class="w"> </span><span class="nv">on</span><span class="w"> </span><span class="nv">both</span><span class="w"> </span><span class="nv">sides</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">we</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">filter</span><span class="na">.</span>

<span class="nv">And</span><span class="w"> </span><span class="nv">so</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">same</span><span class="w"> </span><span class="nv">pattern</span><span class="w"> </span><span class="nv">again</span><span class="na">.</span><span class="w"> </span><span class="nv">We</span><span class="w"> </span><span class="nv">have</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">filtering</span><span class="w"> </span><span class="nv">function</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">we</span><span class="w"> </span><span class="nv">want</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">same</span><span class="w"> </span><span class="nv">argument</span><span class="o">,</span><span class="w"> </span><span class="nv">but</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">right</span><span class="w"> </span><span class="nv">side</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">preprocessed</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">function</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">left</span><span class="w"> </span><span class="nv">argument</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">just</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">way</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">is</span><span class="na">.</span><span class="w"> </span><span class="nv">So</span><span class="w"> </span><span class="nv">we</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">do</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">same</span><span class="w"> </span><span class="nv">thing</span><span class="w"> </span><span class="nv">again</span><span class="na">.</span><span class="w"> </span><span class="nv">We</span><span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">preprocessing</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">right</span><span class="w"> </span><span class="nv">argument</span><span class="w"> </span><span class="nv">operator</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">parentheses</span><span class="w"> </span><span class="nv">like</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">then</span><span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="nv">commute</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">put</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">same</span><span class="w"> </span><span class="nv">argument</span><span class="w"> </span><span class="nv">over</span><span class="w"> </span><span class="nv">on</span><span class="w"> </span><span class="nv">both</span><span class="w"> </span><span class="nv">sides</span><span class="na">.</span>

<span class="nv">So</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">fully</span><span class="w"> </span><span class="nv">tested</span><span class="w"> </span><span class="nv">version</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">f</span><span class="na">.</span><span class="w"> </span><span class="nv">However</span><span class="o">,</span><span class="w"> </span><span class="nv">I</span><span class="w"> </span><span class="nv">don</span><span class="s1">&#39;t consider this very readable. It&#39;</span><span class="nv">s</span><span class="w"> </span><span class="nv">perfectly</span><span class="w"> </span><span class="nv">correct</span><span class="na">.</span><span class="w"> </span><span class="nv">It</span><span class="s1">&#39;s more for exercise sake that we do this conversion.</span>

<span class="s1">Now, as I mentioned, there are some interesting questions regarding what exactly is considered a non-integer and what exactly do we mean by floating point. Let&#39;</span><span class="nv">s</span><span class="w"> </span><span class="nv">create</span><span class="w"> </span><span class="nv">some</span><span class="w"> </span><span class="nv">interesting</span><span class="w"> </span><span class="nv">data</span><span class="na">.</span><span class="w"> </span><span class="nv">Let</span><span class="s1">&#39;s say we take a very small value, 1 times 10 to the power of negative 13, and we add it to the numbers 1 through 15. </span>

<span class="s1">If we print these numbers, then they look like integers, and that is because by default, APL will round to about 10 digits of precision, and then because we&#39;</span><span class="nv">ve</span><span class="w"> </span><span class="nv">only</span><span class="w"> </span><span class="nv">added</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">power</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">negative</span><span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">each</span><span class="w"> </span><span class="nv">one</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">these</span><span class="o">,</span><span class="w"> </span><span class="nv">we</span><span class="w"> </span><span class="nv">don</span><span class="s1">&#39;t notice this.</span>

<span class="s1">However, if we format using 14 decimals, then we can see that there is actually more to it. We could also, of course, say &quot;w minus the floor of w,&quot; and then we can see that there&#39;</span><span class="nv">s</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">bit</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">difference</span><span class="w"> </span><span class="nv">there</span><span class="na">.</span><span class="w"> </span><span class="nv">It</span><span class="w"> </span><span class="nv">isn</span><span class="s1">&#39;t exactly 1 times 10 to the power of &quot;and,&quot; and that is because there are some floating-point inaccuracies at that level.</span>

<span class="s1">This is where things get interesting. Should these numbers in w be considered floating point or not? Well, if you try to apply a function f on w, then you can see it says, &quot;Oh, the numbers 1 through 9 are considered non-integers, but the numbers 10 through 15 are considered integers,&quot; which is, of course, interesting and odd.</span>

<span class="s1">The reason is that APL, by default, has something called the comparison tolerance, which is a multiplicative fuzz factor allowing comparison as long as the ratio to each other does not differ by more than 1 to the power of negative 14 or 1 plus 1 to the time 10 to the power of negative 14. This first factor can be set the comparison tolerance, but this is the default value, and that is why I chose 1 times 10 to the power of negative 13.</span>

<span class="s1">So as soon as we hit 10 or more, then we have now reached the factor of 14 orders of magnitude, and their numbers are considered equal. So when we&#39;</span><span class="nv">re</span><span class="w"> </span><span class="nv">comparing</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">floor</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">original</span><span class="w"> </span><span class="nv">number</span><span class="o">,</span><span class="w"> </span><span class="nv">they</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">now</span><span class="w"> </span><span class="nv">considered</span><span class="w"> </span><span class="nv">equal</span><span class="w"> </span><span class="nv">and</span><span class="o">,</span><span class="w"> </span><span class="nv">therefore</span><span class="o">,</span><span class="w"> </span><span class="nv">they</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">filtered</span><span class="w"> </span><span class="nv">away</span><span class="na">.</span>

<span class="nv">Now</span><span class="w"> </span><span class="nv">we</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">counteract</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">making</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">version</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">f</span><span class="o">,</span><span class="w"> </span><span class="nv">say</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">comparison</span><span class="w"> </span><span class="nv">tolerance</span><span class="w"> </span><span class="nv">including</span><span class="w"> </span><span class="nv">version</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">where</span><span class="w"> </span><span class="nv">we</span><span class="w"> </span><span class="nv">temporarily</span><span class="w"> </span><span class="nv">locally</span><span class="w"> </span><span class="nv">set</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">comparison</span><span class="w"> </span><span class="nv">tolerance</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">zero</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">after</span><span class="w"> </span><span class="nv">that</span><span class="o">,</span><span class="w"> </span><span class="nv">we</span><span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">formula</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">before</span><span class="na">.</span><span class="w"> </span><span class="nv">Now</span><span class="w"> </span><span class="nv">when</span><span class="w"> </span><span class="nv">we</span><span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="nv">fc</span><span class="w"> </span><span class="nv">on</span><span class="w"> </span><span class="nv">w</span><span class="o">,</span><span class="w"> </span><span class="nv">then</span><span class="w"> </span><span class="nv">all</span><span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="nv">numbers</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">considered</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">floating</span><span class="w"> </span><span class="nv">point</span><span class="w"> </span><span class="nv">because</span><span class="w"> </span><span class="nv">we</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">now</span><span class="w"> </span><span class="nv">exact</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">what</span><span class="w"> </span><span class="nv">we</span><span class="s1">&#39;re doing. So this is the one definition that they compare to each other.</span>

<span class="s1">Another definition is the internal representation. Normally in APL, you don&#39;</span><span class="nv">t</span><span class="w"> </span><span class="nv">care</span><span class="w"> </span><span class="nv">much</span><span class="w"> </span><span class="nv">about</span><span class="w"> </span><span class="nv">how</span><span class="w"> </span><span class="nv">things</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">represented</span><span class="w"> </span><span class="nv">internally</span><span class="w"> </span><span class="nv">unless</span><span class="w"> </span><span class="nv">possibly</span><span class="w"> </span><span class="nv">you</span><span class="s1">&#39;re doing some performance optimizations but usually not for the values themselves. But we can actually ask APL what is the data representation of such values.</span>

<span class="s1">If we go back to v, we can see that v which we have here is stored as a 6 4 5 and the 6 4 means the 64 bit per element and 5 means it&#39;</span><span class="nv">s</span><span class="w"> </span><span class="nv">floating</span><span class="w"> </span><span class="nv">point</span><span class="o">,</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">binary</span><span class="w"> </span><span class="nv">floating</span><span class="w"> </span><span class="nv">point</span><span class="na">.</span><span class="w"> </span><span class="nv">So</span><span class="o">,</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="m">64</span><span class="w"> </span><span class="nv">bit</span><span class="w"> </span><span class="nv">binary</span><span class="w"> </span><span class="nv">float</span><span class="w"> </span><span class="nv">array</span><span class="na">.</span>

<span class="nv">However</span><span class="o">,</span><span class="w"> </span><span class="nv">Quad</span><span class="w"> </span><span class="nv">DR</span><span class="w"> </span><span class="nv">also</span><span class="w"> </span><span class="nv">tries</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">compact</span><span class="w"> </span><span class="nv">every</span><span class="w"> </span><span class="nv">argument</span><span class="w"> </span><span class="nv">you</span><span class="w"> </span><span class="nv">give</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">before</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">tells</span><span class="w"> </span><span class="nv">you</span><span class="w"> </span><span class="nv">what</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="nv">type</span><span class="w"> </span><span class="nv">is</span><span class="na">.</span><span class="w"> </span><span class="nv">And</span><span class="w"> </span><span class="nv">if</span><span class="w"> </span><span class="nv">we</span><span class="w"> </span><span class="nv">apply</span><span class="w"> </span><span class="nv">Quad</span><span class="w"> </span><span class="nv">DR</span><span class="w"> </span><span class="nv">on</span><span class="w"> </span><span class="nv">each</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">these</span><span class="w"> </span><span class="nv">then</span><span class="w"> </span><span class="nv">we</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">see</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">trying</span><span class="w"> </span><span class="nv">separately</span><span class="w"> </span><span class="nv">on</span><span class="w"> </span><span class="nv">each</span><span class="w"> </span><span class="nv">element</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">compact</span><span class="w"> </span><span class="nv">them</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">much</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">possible</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">first</span><span class="w"> </span><span class="nv">number</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">fit</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="m">64</span><span class="o">-</span><span class="nv">bit</span><span class="w"> </span><span class="nv">float</span><span class="w"> </span><span class="nv">only</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">second</span><span class="w"> </span><span class="nv">number</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">fit</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="m">8</span><span class="o">-</span><span class="m">3</span><span class="na">.</span><span class="w"> </span><span class="nv">That</span><span class="w"> </span><span class="nv">means</span><span class="w"> </span><span class="m">8</span><span class="o">-</span><span class="nv">bit</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="nv">means</span><span class="w"> </span><span class="nv">integer</span><span class="na">.</span><span class="w"> </span><span class="nv">So</span><span class="o">,</span><span class="w"> </span><span class="nv">that</span><span class="s1">&#39;s an 8 bit integer or 1 byte integer.</span>

<span class="s1">We can exploit this then. We can create a function g that selects the argument filtered by whether or not 645 is equal to the data representation of each element. And this will work on v. If we try it on w then we&#39;</span><span class="nv">ll</span><span class="w"> </span><span class="nv">see</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">also</span><span class="w"> </span><span class="nv">considers</span><span class="w"> </span><span class="nv">all</span><span class="w"> </span><span class="nv">these</span><span class="w"> </span><span class="nv">numbers</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">floating</span><span class="w"> </span><span class="nv">point</span><span class="w"> </span><span class="nv">values</span><span class="w"> </span><span class="nv">because</span><span class="w"> </span><span class="nv">they</span><span class="s1">&#39;re, in fact, stored as floating point even when they&#39;</span><span class="nv">re</span><span class="w"> </span><span class="nv">compacted</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">most</span><span class="w"> </span><span class="nv">because</span><span class="w"> </span><span class="nv">they</span><span class="w"> </span><span class="nv">have</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">additional</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="nv">times</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">power</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">negative</span><span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="nv">added</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">them</span><span class="na">.</span><span class="w"> </span><span class="nv">So</span><span class="o">,</span><span class="w"> </span><span class="nv">here</span><span class="w"> </span><span class="nv">comparison</span><span class="w"> </span><span class="nv">tolerance</span><span class="w"> </span><span class="nv">doesn</span><span class="s1">&#39;t matter at all.</span>

<span class="s1">Let&#39;</span><span class="nv">s</span><span class="w"> </span><span class="nv">make</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">interesting</span><span class="w"> </span><span class="nv">one</span><span class="na">.</span><span class="w"> </span><span class="nv">If</span><span class="w"> </span><span class="nv">we</span><span class="w"> </span><span class="nv">take</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">values</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="nv">v</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">we</span><span class="w"> </span><span class="nv">also</span><span class="w"> </span><span class="nv">add</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">very</span><span class="w"> </span><span class="nv">large</span><span class="w"> </span><span class="nv">value</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">should</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">noted</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">if</span><span class="w"> </span><span class="nv">I</span><span class="w"> </span><span class="nv">ask</span><span class="w"> </span><span class="nv">what</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">data</span><span class="w"> </span><span class="nv">representation</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="nv">times</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">power</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="m">400</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">answers</span><span class="w"> </span><span class="m">1287</span><span class="na">.</span>

<span class="nv">This</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="m">64</span><span class="o">-</span><span class="nv">bit</span><span class="w"> </span><span class="nv">float</span><span class="w"> </span><span class="nv">because</span><span class="w"> </span><span class="m">64</span><span class="o">-</span><span class="nv">bit</span><span class="w"> </span><span class="nv">floats</span><span class="w"> </span><span class="nv">do</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">reach</span><span class="w"> </span><span class="nv">such</span><span class="w"> </span><span class="nv">large</span><span class="w"> </span><span class="nv">magnitudes</span><span class="na">.</span><span class="w"> </span><span class="nv">Instead</span><span class="o">,</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="m">128</span><span class="o">-</span><span class="nv">bit</span><span class="w"> </span><span class="nv">float</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="nv">here</span><span class="w"> </span><span class="nv">indicates</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">it</span><span class="s1">&#39;s not a binary that would be 5, and 3 is an integer but rather a decimal float. So this is using a 128-bit decimal float representation for the large magnitude, and of course, this gives a problem.</span>

<span class="s1">Now we have our x, and if we try to run g on x, then things fail spectacularly, and the reason is that apl will internally upgrade all of these numbers to be decimal floats, and then they get stuck there, and we compare them. So if you say the data representation of each one of x, then we can see that the floats all became decimal floats, and the integers are filtered away, of course. And then since we&#39;</span><span class="nv">re</span><span class="w"> </span><span class="nv">only</span><span class="w"> </span><span class="nv">looking</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">binary</span><span class="w"> </span><span class="nv">floats</span><span class="o">,</span><span class="w"> </span><span class="nv">we</span><span class="s1">&#39;re not finding anything.</span>

<span class="s1">But we can amend this function. So let&#39;</span><span class="nv">s</span><span class="w"> </span><span class="nv">say</span><span class="w"> </span><span class="nv">we</span><span class="w"> </span><span class="nv">have</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">g</span><span class="w"> </span><span class="nv">which</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">also</span><span class="w"> </span><span class="nv">contains</span><span class="w"> </span><span class="nv">decimal</span><span class="w"> </span><span class="nv">values</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">that</span><span class="o">,</span><span class="w"> </span><span class="nv">we</span><span class="w"> </span><span class="nv">just</span><span class="w"> </span><span class="nv">check</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">membership</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="m">645</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="m">1287</span><span class="na">.</span><span class="w"> </span><span class="nv">And</span><span class="w"> </span><span class="nv">now</span><span class="w"> </span><span class="nv">we</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">run</span><span class="w"> </span><span class="nv">gd</span><span class="w"> </span><span class="nv">on</span><span class="w"> </span><span class="nv">x</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">matches</span><span class="w"> </span><span class="nv">all</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">these</span><span class="na">.</span><span class="w"> </span><span class="nv">So</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">considers</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="nv">times</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">power</span><span class="w"> </span><span class="m">400</span><span class="w"> </span><span class="nv">floating</span><span class="w"> </span><span class="nv">point</span><span class="o">,</span><span class="w"> </span><span class="nv">which</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">correct</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">internal</span><span class="w"> </span><span class="nv">representation</span><span class="na">.</span>

<span class="nv">However</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">problem</span><span class="w"> </span><span class="nv">specification</span><span class="w"> </span><span class="nv">also</span><span class="w"> </span><span class="nv">said</span><span class="w"> </span><span class="nv">none</span><span class="w"> </span><span class="nv">integer</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">I</span><span class="s1">&#39;m sure you&#39;</span><span class="nv">ll</span><span class="w"> </span><span class="nv">agree</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="nv">times</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">power</span><span class="w"> </span><span class="m">400</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">very</span><span class="w"> </span><span class="nv">much</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">integer</span><span class="o">,</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">non</span><span class="o">-</span><span class="nv">integer</span><span class="na">.</span><span class="w"> </span><span class="nv">But</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">depends</span><span class="w"> </span><span class="nv">on</span><span class="w"> </span><span class="nv">how</span><span class="w"> </span><span class="nv">exactly</span><span class="w"> </span><span class="nv">you</span><span class="w"> </span><span class="nv">understand</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">problem</span><span class="na">.</span>

<span class="nv">So</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">very</span><span class="w"> </span><span class="nv">simplistic</span><span class="w"> </span><span class="nv">understanding</span><span class="w"> </span><span class="nv">would</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">human</span><span class="w"> </span><span class="nv">perspective</span><span class="bp">:</span><span class="w"> </span><span class="nv">well</span><span class="o">,</span><span class="w"> </span><span class="nv">it</span><span class="s1">&#39;s an integer if it&#39;</span><span class="nv">s</span><span class="w"> </span><span class="nv">just</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">bunch</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">digits</span><span class="w"> </span><span class="nv">together</span><span class="o">,</span><span class="w"> </span><span class="nv">possibly</span><span class="w"> </span><span class="nv">negative</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">it</span><span class="s1">&#39;s not an integer if you need a decimal point to write out the number. And we can write this in APL as well. </span>

<span class="s1">So what we&#39;</span><span class="nv">ll</span><span class="w"> </span><span class="nv">do</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">we</span><span class="s1">&#39;ll format each number to a character vector, and we can look whether or not there is a dot in each of these. And if there&#39;</span><span class="nv">s</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">dot</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">character</span><span class="w"> </span><span class="nv">representation</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">number</span><span class="o">,</span><span class="w"> </span><span class="nv">then</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">would</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">non</span><span class="o">-</span><span class="nv">integer</span><span class="w"> </span><span class="nv">number</span><span class="na">.</span><span class="w"> </span><span class="nv">This</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">going</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">work</span><span class="w"> </span><span class="nv">when</span><span class="w"> </span><span class="nv">you</span><span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">scaled</span><span class="w"> </span><span class="nv">format</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">e</span><span class="w"> </span><span class="nv">inside</span><span class="o">,</span><span class="w"> </span><span class="nv">but</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">normal</span><span class="w"> </span><span class="nv">numbers</span><span class="o">,</span><span class="w"> </span><span class="nv">it</span><span class="s1">&#39;s going to work.</span>

<span class="s1">You can also combine these two. Instead of running two loops, we can fuse the loops by saying we want membership, but we want the right argument to membership to be preprocessed with format. So this is a dot member of the format for each one of the numbers, and if there&#39;</span><span class="nv">s</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">dot</span><span class="o">,</span><span class="w"> </span><span class="nv">then</span><span class="w"> </span><span class="nv">we</span><span class="w"> </span><span class="nv">want</span><span class="w"> </span><span class="nv">them</span><span class="sr">;</span><span class="w"> </span><span class="nv">otherwise</span><span class="o">,</span><span class="w"> </span><span class="nv">we</span><span class="w"> </span><span class="nv">discard</span><span class="w"> </span><span class="nv">them</span><span class="na">.</span><span class="w"> </span><span class="nv">So</span><span class="w"> </span><span class="nv">we</span><span class="w"> </span><span class="nv">simply</span><span class="w"> </span><span class="nv">filter</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">that</span><span class="na">.</span><span class="w"> </span><span class="nv">And</span><span class="w"> </span><span class="nv">now</span><span class="w"> </span><span class="nv">we</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">try</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">on</span><span class="w"> </span><span class="nv">x</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">we</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">see</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="nv">times</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">power</span><span class="w"> </span><span class="m">400</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">going</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">filtered</span><span class="w"> </span><span class="nv">away</span><span class="na">.</span>

<span class="nv">However</span><span class="o">,</span><span class="w"> </span><span class="nv">if</span><span class="w"> </span><span class="nv">we</span><span class="w"> </span><span class="nv">run</span><span class="w"> </span><span class="nv">x</span><span class="w"> </span><span class="nv">on</span><span class="w"> </span><span class="nv">our</span><span class="w"> </span><span class="nv">w</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="nv">before</span><span class="w"> </span><span class="p">(</span><span class="nv">remember</span><span class="w"> </span><span class="nv">w</span><span class="w"> </span><span class="nv">where</span><span class="w"> </span><span class="nv">these</span><span class="w"> </span><span class="nv">numbers</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="m">15</span><span class="w"> </span><span class="nv">were</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">little</span><span class="w"> </span><span class="nv">bit</span><span class="w"> </span><span class="nv">added</span><span class="p">)</span><span class="o">,</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">considers</span><span class="w"> </span><span class="nv">none</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">them</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">non</span><span class="o">-</span><span class="nv">integers</span><span class="na">.</span><span class="w"> </span><span class="nv">So</span><span class="w"> </span><span class="nv">it</span><span class="s1">&#39;s in a way more tolerant of being close to integer. The reason for that is because when we format the numbers in w, they look like this. But we can actually give a left argument to the format function, which is the number of decimals to add. So if we add, say, 14 decimals to it, then we can see that we get this one inside the decimals. So we could amend the function to do this. If we ask for too much, then it&#39;</span><span class="nv">s</span><span class="w"> </span><span class="nv">going</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">add</span><span class="w"> </span><span class="nv">some</span><span class="w"> </span><span class="nv">underscores</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">digits</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">cannot</span><span class="w"> </span><span class="nv">figure</span><span class="w"> </span><span class="nv">out</span><span class="w"> </span><span class="nv">based</span><span class="w"> </span><span class="nv">on</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">internal</span><span class="w"> </span><span class="nv">representation</span><span class="na">.</span>

<span class="nv">Another</span><span class="w"> </span><span class="nv">way</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">using</span><span class="w"> </span><span class="nv">something</span><span class="w"> </span><span class="nv">called</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">print</span><span class="w"> </span><span class="nv">precision</span><span class="o">,</span><span class="w"> </span><span class="nv">which</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">default</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="m">10</span><span class="o">,</span><span class="w"> </span><span class="nv">which</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">why</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">default</span><span class="o">,</span><span class="w"> </span><span class="nv">we</span><span class="s1">&#39;ll get 10 significant digits in our printouts. And if we change quad pp to something large, say 17, then doing the same expression will give us more. There&#39;</span><span class="nv">s</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">implicit</span><span class="w"> </span><span class="nv">argument</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">format</span><span class="w"> </span><span class="nv">function</span><span class="na">.</span><span class="w"> </span><span class="nv">Let</span><span class="s1">&#39;s change that back to 10 here. And then we can write our function h as before, but this time we make a local change to pp, and I&#39;</span><span class="nv">ll</span><span class="w"> </span><span class="nv">set</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">maximum</span><span class="w"> </span><span class="nv">value</span><span class="w"> </span><span class="nv">that</span><span class="s1">&#39;s allowed, even for decimal floats. It would be 34 digits. So we take omega, filter that with whether or not a dot is a member in the format of each of the argument. And now we can try it on w, and it considers all these near integers to be non-integers. I should probably have given this a new name. I&#39;</span><span class="nv">ll</span><span class="w"> </span><span class="nv">do</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">code</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">I</span><span class="w"> </span><span class="nv">post</span><span class="na">.</span><span class="w"> </span><span class="nv">Okay</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">so</span><span class="w"> </span><span class="nv">much</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">regular</span><span class="w"> </span><span class="nv">ways</span><span class="na">.</span>

<span class="nv">Let</span><span class="s1">&#39;s look at a little bit more exotic ways of solving this problem, and here&#39;</span><span class="nv">s</span><span class="w"> </span><span class="nv">one</span><span class="na">.</span><span class="w"> </span><span class="nv">Let</span><span class="s1">&#39;s say we have these numbers v. We can take the division remainder with one, so this is also known as modulus one or what is left over if I was to try to create this number just by adding ones together, and that is a non-integer if the number is non-integer and zero if it is an integer because you can create any zero any integer by multiplying an integer with one. Of course, that same number, and that means that we can compare with zero. </span>

<span class="s1">So wherever we have zero, we want to get rid of that, and whenever we have a positive value and none nonzero, then we want to keep it. We could just do a comparison with zero; however, we can also just take the sign or signum of this because we&#39;</span><span class="nv">ll</span><span class="w"> </span><span class="nv">never</span><span class="w"> </span><span class="nv">have</span><span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">negative</span><span class="w"> </span><span class="nv">results</span><span class="w"> </span><span class="nv">from</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">division</span><span class="w"> </span><span class="nv">remainder</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">modulus</span><span class="na">.</span><span class="w"> </span><span class="nv">And</span><span class="w"> </span><span class="nv">so</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">gives</span><span class="w"> </span><span class="nv">us</span><span class="w"> </span><span class="nv">our</span><span class="w"> </span><span class="nv">mask</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">we</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">select</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">values</span><span class="w"> </span><span class="nv">based</span><span class="w"> </span><span class="nv">on</span><span class="w"> </span><span class="nv">that</span><span class="na">.</span><span class="w"> </span><span class="nv">Let</span><span class="s1">&#39;s put this into a function. There we go. And now we can try it on these values.</span>

<span class="s1">Here we can see we hit this problem again with near integers, and we could solve this by changing the comparison tolerance locally. So let&#39;</span><span class="nv">s</span><span class="w"> </span><span class="nv">do</span><span class="w"> </span><span class="nv">ic</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">comparison</span><span class="w"> </span><span class="nv">tolerance</span><span class="w"> </span><span class="nv">so</span><span class="w"> </span><span class="nv">we</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">set</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">zero</span><span class="na">.</span><span class="w"> </span><span class="nv">And</span><span class="w"> </span><span class="nv">then</span><span class="w"> </span><span class="nv">we</span><span class="w"> </span><span class="nv">have</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">same</span><span class="w"> </span><span class="nv">form</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">before</span><span class="o">,</span><span class="w"> </span><span class="nv">ic</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">w</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">now</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">works</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">all</span><span class="w"> </span><span class="nv">these</span><span class="w"> </span><span class="nv">values</span><span class="na">.</span><span class="w"> </span>

<span class="nv">And</span><span class="w"> </span><span class="nv">then</span><span class="w"> </span><span class="nv">there</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">tricky</span><span class="w"> </span><span class="nv">thing</span><span class="o">,</span><span class="w"> </span><span class="nv">which</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">represent</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">encode</span><span class="na">.</span><span class="w"> </span><span class="nv">Encode</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">takes</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">possibly</span><span class="w"> </span><span class="nv">mixed</span><span class="w"> </span><span class="nv">radix</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">on</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">left</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">represents</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">number</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">numbers</span><span class="w"> </span><span class="nv">on</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">right</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">base</span><span class="na">.</span><span class="w"> </span><span class="nv">However</span><span class="o">,</span><span class="w"> </span><span class="nv">here</span><span class="w"> </span><span class="nv">we</span><span class="s1">&#39;re not actually interested in a full representation. We&#39;</span><span class="nv">re</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">even</span><span class="w"> </span><span class="nv">interested</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">representation</span><span class="na">.</span><span class="w"> </span><span class="nv">The</span><span class="w"> </span><span class="nv">only</span><span class="w"> </span><span class="nv">thing</span><span class="w"> </span><span class="nv">we</span><span class="w"> </span><span class="nv">want</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">know</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">if</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">smallest</span><span class="w"> </span><span class="nv">unit</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">base</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">one</span><span class="o">,</span><span class="w"> </span><span class="nv">then</span><span class="w"> </span><span class="nv">would</span><span class="w"> </span><span class="nv">there</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">would</span><span class="w"> </span><span class="nv">there</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">one</span><span class="w"> </span><span class="nv">there</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">how</span><span class="w"> </span><span class="nv">many</span><span class="w"> </span><span class="nv">ones</span><span class="w"> </span><span class="nv">would</span><span class="w"> </span><span class="nv">there</span><span class="w"> </span><span class="nv">be</span><span class="o">?</span>

<span class="nv">It</span><span class="s1">&#39;s a bit interesting to explain like this, but let&#39;</span><span class="nv">s</span><span class="w"> </span><span class="nv">have</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">look</span><span class="w"> </span><span class="nv">at</span><span class="w"> </span><span class="nv">what</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">looks</span><span class="w"> </span><span class="nv">like</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">v</span><span class="na">.</span><span class="w"> </span><span class="nv">And</span><span class="w"> </span><span class="nv">you</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">notice</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">exactly</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">same</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">division</span><span class="w"> </span><span class="nv">remainder</span><span class="o">,</span><span class="w"> </span><span class="nv">which</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">actually</span><span class="w"> </span><span class="nv">makes</span><span class="w"> </span><span class="nv">sense</span><span class="w"> </span><span class="nv">because</span><span class="w"> </span><span class="nv">when</span><span class="w"> </span><span class="nv">you</span><span class="s1">&#39;re trying to convert to a base, then you keep subtracting as large units as possible, and then the remainder is left over here. So what&#39;</span><span class="nv">s</span><span class="w"> </span><span class="nv">happening</span><span class="w"> </span><span class="nv">here</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">we</span><span class="w"> </span><span class="nv">end</span><span class="w"> </span><span class="nv">up</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">how</span><span class="w"> </span><span class="nv">many</span><span class="w"> </span><span class="nv">ones</span><span class="w"> </span><span class="nv">are</span><span class="w"> </span><span class="nv">there</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">cannot</span><span class="w"> </span><span class="nv">be</span><span class="w"> </span><span class="nv">represented</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">larger</span><span class="w"> </span><span class="nv">unit</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">then</span><span class="w"> </span><span class="nv">we</span><span class="w"> </span><span class="nv">end</span><span class="w"> </span><span class="nv">up</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">division</span><span class="w"> </span><span class="nv">remainder</span><span class="na">.</span><span class="w"> </span><span class="nv">Now</span><span class="w"> </span><span class="nv">what</span><span class="s1">&#39;s interesting with encode is that it doesn&#39;</span><span class="nv">t</span><span class="w"> </span><span class="nv">care</span><span class="w"> </span><span class="nv">about</span><span class="w"> </span><span class="nv">comparison</span><span class="w"> </span><span class="nv">tolerance</span><span class="sr">;</span><span class="w"> </span><span class="nv">it</span><span class="s1">&#39;s always precise. </span>

<span class="s1">So we could actually abuse this and write it exactly the same way without specifying comparison tolerance, and then it would work even for these near integers. However, I don&#39;</span><span class="nv">t</span><span class="w"> </span><span class="nv">think</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">very</span><span class="w"> </span><span class="nv">clear</span><span class="na">.</span><span class="w"> </span><span class="nv">Don</span><span class="s1">&#39;t write this in your production code. It&#39;</span><span class="nv">s</span><span class="w"> </span><span class="nv">much</span><span class="w"> </span><span class="nv">better</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">set</span><span class="w"> </span><span class="nv">quad</span><span class="w"> </span><span class="nv">ct</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">zero</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">tell</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">reader</span><span class="w"> </span><span class="nv">what</span><span class="w"> </span><span class="nv">you</span><span class="s1">&#39;re actually trying to do. Another way to work around it is, remember I mentioned that quad ct is like a multiplicative fuzz factor, and it&#39;</span><span class="nv">s</span><span class="w"> </span><span class="nv">used</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">measure</span><span class="w"> </span><span class="nv">relative</span><span class="w"> </span><span class="nv">difference</span><span class="w"> </span><span class="nv">between</span><span class="w"> </span><span class="nv">things</span><span class="na">.</span><span class="w"> </span>

<span class="nv">Now</span><span class="w"> </span><span class="nv">if</span><span class="w"> </span><span class="nv">you</span><span class="w"> </span><span class="nv">multiply</span><span class="w"> </span><span class="nv">by</span><span class="w"> </span><span class="nv">zero</span><span class="o">,</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">course</span><span class="o">,</span><span class="w"> </span><span class="nv">you</span><span class="w"> </span><span class="nv">get</span><span class="w"> </span><span class="nv">zero</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">consequence</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">this</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">comparison</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="nv">true</span><span class="w"> </span><span class="nv">zero</span><span class="o">,</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">comparison</span><span class="w"> </span><span class="nv">tolerance</span><span class="w"> </span><span class="nv">doesn</span><span class="s1">&#39;t matter. So even a value that is very, very small, say 1 times 10 to the power of negative 300, is not going to be considered the same as 0. How can we use this? Well, if we take these values and we subtract their floor like we spoke about in the beginning, and then we can compare this to zero, and this gives us also a true comparison.</span>

<span class="s1">So we can write now a subtraction based version of f that uses this system, and we can try fs on our special w. And, oops, sorry, this is wrong. This should be an unequal. Of course, we want the ones that are on floats. There we go. And we can see that all of these near integers are now considered to be non-integers, and that is because the difference between them and their floor is very small but is not equal to zero.</span>

<span class="s1">And finally, just for a bit of a joke solution, if we try to use the argument as left argument to replicate, but we&#39;</span><span class="nv">re</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">actually</span><span class="w"> </span><span class="nv">interested</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">using</span><span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">value</span><span class="o">,</span><span class="w"> </span><span class="nv">so</span><span class="w"> </span><span class="nv">we</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">just</span><span class="w"> </span><span class="nv">replicate</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">empty</span><span class="w"> </span><span class="nv">vector</span><span class="o">,</span><span class="w"> </span><span class="nv">which</span><span class="w"> </span><span class="nv">will</span><span class="w"> </span><span class="nv">always</span><span class="w"> </span><span class="nv">give</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">empty</span><span class="w"> </span><span class="nv">vector</span><span class="na">.</span><span class="w"> </span><span class="nv">Then</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">function</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">subject</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">limitations</span><span class="w"> </span><span class="nv">in</span><span class="w"> </span><span class="nv">domain</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">replicate</span><span class="w"> </span><span class="nv">function</span><span class="na">.</span><span class="w"> </span>

<span class="nv">Now</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">replicate</span><span class="w"> </span><span class="nv">function</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">take</span><span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">integer</span><span class="o">,</span><span class="w"> </span><span class="nv">positive</span><span class="w"> </span><span class="nv">or</span><span class="w"> </span><span class="nv">negative</span><span class="o">,</span><span class="w"> </span><span class="nv">including</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="nv">as</span><span class="w"> </span><span class="nv">argument</span><span class="na">.</span><span class="w"> </span><span class="nv">This</span><span class="w"> </span><span class="nv">means</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">will</span><span class="w"> </span><span class="nv">error</span><span class="w"> </span><span class="nv">if</span><span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">element</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">not</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">integer</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">that</span><span class="s1">&#39;s exactly what we&#39;</span><span class="nv">re</span><span class="w"> </span><span class="nv">looking</span><span class="w"> </span><span class="nv">for</span><span class="na">.</span><span class="w"> </span><span class="nv">So</span><span class="w"> </span><span class="nv">we</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">set</span><span class="w"> </span><span class="nv">up</span><span class="w"> </span><span class="nv">an</span><span class="w"> </span><span class="nv">error</span><span class="w"> </span><span class="nv">guard</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">says</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">if</span><span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">error</span><span class="w"> </span><span class="nv">happens</span><span class="o">,</span><span class="w"> </span><span class="nv">it</span><span class="s1">&#39;s really the main error, but let&#39;</span><span class="nv">s</span><span class="w"> </span><span class="nv">just</span><span class="w"> </span><span class="nv">do</span><span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">error</span><span class="w"> </span><span class="nv">for</span><span class="w"> </span><span class="nv">now</span><span class="na">.</span><span class="w"> </span><span class="nv">If</span><span class="w"> </span><span class="nv">any</span><span class="w"> </span><span class="nv">error</span><span class="w"> </span><span class="nv">happens</span><span class="o">,</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">means</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">test</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">argument</span><span class="w"> </span><span class="nv">is</span><span class="w"> </span><span class="nv">non</span><span class="o">-</span><span class="nv">integer</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">we</span><span class="w"> </span><span class="nv">want</span><span class="w"> </span><span class="nv">it</span><span class="na">.</span><span class="w"> </span><span class="nv">Otherwise</span><span class="o">,</span><span class="w"> </span><span class="nv">we</span><span class="w"> </span><span class="nv">replicate</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">empty</span><span class="w"> </span><span class="nv">vector</span><span class="o">,</span><span class="w"> </span><span class="nv">which</span><span class="w"> </span><span class="nv">gives</span><span class="w"> </span><span class="nv">us</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">empty</span><span class="w"> </span><span class="nv">vector</span><span class="na">.</span><span class="w"> </span><span class="nv">Let</span><span class="s1">&#39;s try this first. So if we do this on v, then we can see the gap here.</span>

<span class="s1">So we get an empty vector for every integer, and we get the integer and they get the number itself for numbers that are not integers. And all we need to do now is enlist, and that collapses all the empty vectors away, and we just get the result we want. So this solution also works. It has horrible performance. It&#39;</span><span class="nv">s</span><span class="w"> </span><span class="nv">completely</span><span class="w"> </span><span class="nv">abusing</span><span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">system</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">fails</span><span class="w"> </span><span class="nv">on</span><span class="w"> </span><span class="nv">numbers</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="nv">very</span><span class="w"> </span><span class="nv">large</span><span class="w"> </span><span class="nv">magnitude</span><span class="o">,</span><span class="w"> </span><span class="nv">but</span><span class="w"> </span><span class="nv">well</span><span class="o">,</span><span class="w"> </span><span class="nv">it</span><span class="w"> </span><span class="nv">works</span><span class="o">,</span><span class="w"> </span><span class="nv">subject</span><span class="w"> </span><span class="nv">to</span><span class="w"> </span><span class="nv">comparison</span><span class="w"> </span><span class="nv">tolerance</span><span class="w"> </span><span class="nv">again</span><span class="w"> </span><span class="nv">like</span><span class="w"> </span><span class="nv">before</span><span class="o">,</span><span class="w"> </span><span class="nv">and</span><span class="w"> </span><span class="nv">we</span><span class="w"> </span><span class="nv">now</span><span class="w"> </span><span class="nv">know</span><span class="w"> </span><span class="nv">how</span><span class="w"> </span><span class="nv">we</span><span class="w"> </span><span class="nv">can</span><span class="w"> </span><span class="nv">deal</span><span class="w"> </span><span class="nv">with</span><span class="w"> </span><span class="nv">that</span><span class="w"> </span><span class="nv">if</span><span class="w"> </span><span class="nv">we</span><span class="w"> </span><span class="nv">want</span><span class="w"> </span><span class="nv">to</span><span class="o">,</span><span class="w"> </span><span class="nv">but</span><span class="w"> </span><span class="nv">that</span><span class="s1">&#39;s it joking solution. Please don&#39;</span><span class="nv">t</span><span class="w"> </span><span class="nv">do</span><span class="w"> </span><span class="nv">this</span><span class="na">.</span>
</pre></div>
</div>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "jgordini/apl-quest-notes",
            ref: "main",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./apl-quest/2013/old"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By jgordini
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>